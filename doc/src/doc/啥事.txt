confirm
nio  同步非阻塞，边抽烟边一个一个敲门问别人拉好了么  
aio 异步非阻塞，边抽烟，等别人拉好了告诉我可以去拉了 

es地图：1,创建索引，新增索引（上架，包括接口获取坐标数据），删除索引（下架），查询索引数据（es获取id列表，查询mysql数据库）  
        2,根据区域获取聚合数据（浮层，边界点集合，点击事件切换），根据区域( 地图左上角和右下角坐标)获取全图数据


消息队列分布式事务

关键在于重试
第一种：自己数据库记录消息（必须全部记录）
第二种：消息中间件自己记录消息（优点，可以只在异常情况下记录）

发送端 ：消息确认机制（消息未发送成功）
路由端：消息返回机制（消息未路由成功）
消费端： 消息确认机制（消息未消费，手动签收）

死信队列，消息过期机制（1nack并设置拒绝重回队列（不建议重回队列），2过期，3队列满了，放入死信队列）

 

生产问题：异步线程池，消息队列恢复限流

先powerdesgin，画图，再建表，再mybatis插件生成代码

工作流开发流程：
一，先保存主表（业务数据），返回id，当做bussinessid（业务实例id），传入流程实例启动api(7-6节)（1关联流程，2关联子业务表）。区别于流程实例id（uuid）
二，任务，assignee分配到任务的人，candidate候选人（baijie,wukong逗号分隔，实际情况写成流程变量，上个任务指派），claim拾取任务，拾取之前assignee是null。归还，交办任务（setassignee）
三，动态并行网关（4.13节尾）
四，通过任务表单的key（设置成任务和key一样）获取表单属性（7-10）。task阶段提交业务数据到数据库 。task获取上一个task参数（数据库）
五，历史图： 获取流程实例id-》流程定义id-》bpmnmodel-》flowelements
六，任务监听器，获取任务相关，获取当前任务执行人，执行相应业务（短信提醒）。也可以传到下一个任务
    执行监听器，获取实例和定义相关，统计执行时间
七，定时事件。定时边界事件，任务多久未办理，短信提醒 
八，消息事件。任务撤回
九，服务任务，自动执行，类似监听器
十，子流程，多实例会签，多实例子流程